---
published: true
title: 【Flask数据库】三种排序方式详解
category: flask_MySQL
tags:
  - python
  - flask
  - MySQL
layout: post
---
# 三种排序方法
### 1、order_by：可以指定根据这个表中的某个字段进行排序，如果在前面加了一个‘-’，代表的是降序排序。正序排序为由小到大，倒序排序为由大到小。若针对时间排序，在倒序(从新往旧)排序时需调用desc()方法，或加负号。
```python
class User(Base):
    __tablename__ = 'user'
    id = Column(Integer,primary_key=True,autoincrement=True)
    username= Column(String(50),nullable=False)
    create_time = Column(DateTime,nullable=False,default=datetime.now)

articles = session.query(Article).order_by(Article.create_time.desc()).all()
#或
articles = session.query(Article).order_by("-create_time").all()

print(articles)
```
### 2、在模型定义的时候指定默认排序：有些时候，不想每次在查询的时候都指定排序的方式，可以在定义模型的时候就指定排序的方式。
有以下两种定义排序方式：

#### 1)relationship的order_by参数
在指定relationship的时候，传递order_by参数来指定排序的字段。
```python
class User(Base):
    __tablename__ = 'user'
    id = Column(Integer,primary_key=True,autoincrement=True)
    username= Column(String(50),nullable=False)
    create_time = Column(DateTime,nullable=False,default=datetime.now)

class Article(Base):
    __tablename__ = 'article'
    id = Column(Integer,primary_key=True,autoincrement=True)
    title= Column(String(50),nullable=False)
    create_time = Column(DateTime,nullable=False,default=datetime.now)
    uid = Column(Integer,ForeignKey = "user.id"
    user = relationship("User",backref=backref("articles",order_by="-create_time")
```
#### 2)在模型定义中
添加以下代码：
```python
 __mapper_args__ = {
     "order_by": title
   }
```
或：
```
 __mapper_args__ = {
     "order_by": title.desc()
   }
```
即可让文章使用标题来进行排序。

### 3、正向排序和反向排序：默认情况是从小到大，从前到后排序的，如果想要反向排序，可以调用排序的字段的desc方法。
