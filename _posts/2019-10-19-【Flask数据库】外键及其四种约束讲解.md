---
published: true
title: 【Flask数据库】外键及其四种约束讲解
category: flask_MySQL
tags:
  - python
  - flask
  - MySQL
layout: post
---
# 外键
通过ForeignKey类来实现，并且可以指定表的外键约束。
******
以下为user表为父表，article表为子表，通过user.id连接。
```python
class Article(Base):
    __tablename__ = 'article'
    id = Column(Integer,primary_key=True,autoincrement=True)
    title = Column(String(50),nullable=False)
    content = Column(Text,nullable=False)
    uid = Column(Integer,ForeignKey('user.id')) #此处数据类型应与父表的id的数据类型相同

    def __repr__(self):
        return "<Article(title:%s)>" % self.title

class User(Base):
    __tablename__ = 'user'
    id = Column(Integer,primary_key=True,autoincrement=True)
    username = Column(String(50),nullable=False)
```
****
### 1、外键约束种类：
#### 1）RESTRICT：父表数据被删除，会阻止删除。默认就是这一项。
#### 2）NO ACTION：在MySQL中，同RESTRICT。
#### 3）CASCADE：级联删除。即父表数据被删除，子表也被删除。
#### 4）SET NULL：父表数据被删除，子表数据会设置为NULL。
*****
 ### 2、选定外键约束的种类，通过设定关键字ondelete的值实现：
`uid = Column(Integer,ForeignKey('user.id',ondelete="RESTRICT"))`
则在mysql中输入`delete from user where id = 1;`会报错
